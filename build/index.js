(()=>{"use strict";class e{constructor(e){this.container=e,this.tabTriggers=this.container.querySelectorAll(".tab-trigger"),this.tabContents=this.container.querySelectorAll(".tab-content"),this.init()}init(){this.updateActiveTab(),window.addEventListener("popstate",()=>this.updateActiveTab())}updateActiveTab(){const e=new URLSearchParams(window.location.search).get("tab")||this.tabTriggers[0]?.dataset.tab;this.tabTriggers.forEach(t=>{const s=t.dataset.tab===e;t.classList.toggle("bg-white",s),t.classList.toggle("text-gray-900",s),t.classList.toggle("shadow-sm",s),t.classList.toggle("text-gray-500",!s),t.classList.toggle("hover:text-gray-700",!s)}),this.tabContents.forEach(t=>{const s=t.dataset.tab===e;t.classList.toggle("hidden",!s),t.classList.toggle("block",s)})}}class t{constructor(e){this.header=e,this.mobileMenu=this.header.querySelector("#mobile-menu"),this.mobileMenuButton=this.header.querySelector("#mobile-menu-button"),this.menuIcon=this.header.querySelector("#mobile-menu-icon"),this.closeIcon=this.header.querySelector("#mobile-close-icon"),this.isMobileMenuOpen=!1,this.navItems=this.header.querySelectorAll(".nav-item"),this.init()}init(){this.setupMobileMenu(),this.setupDesktopDropdowns()}setupMobileMenu(){if(!this.mobileMenuButton)return;this.mobileMenuButton.addEventListener("click",()=>this.toggleMobileMenu());const e=this.mobileMenu?.querySelectorAll("a");e?.forEach(e=>{e.addEventListener("click",()=>this.closeMobileMenu())})}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen,this.isMobileMenuOpen?(this.mobileMenu.classList.remove("hidden"),this.menuIcon.classList.add("hidden"),this.closeIcon.classList.remove("hidden")):this.closeMobileMenu()}closeMobileMenu(){this.mobileMenu.classList.add("hidden"),this.menuIcon.classList.remove("hidden"),this.closeIcon.classList.add("hidden"),this.isMobileMenuOpen=!1}setupDesktopDropdowns(){this.navItems.forEach(e=>{const t=e.querySelector(".dropdown-menu");t&&(e.addEventListener("mouseenter",()=>{t.classList.add("show")}),e.addEventListener("mouseleave",()=>{t.classList.remove("show")}),t.addEventListener("mouseenter",()=>{t.classList.add("show")}),t.addEventListener("mouseleave",()=>{t.classList.remove("show")}))})}}class s{constructor(e){this.form=e,this.submitBtn=this.form.querySelector("#submit-btn"),this.submitText=this.submitBtn?.querySelector(".submit-text"),this.loadingText=this.submitBtn?.querySelector(".loading-text"),this.init()}init(){this.form&&this.form.addEventListener("submit",e=>this.handleSubmit(e))}handleSubmit(e){this.submitBtn&&this.submitText&&this.loadingText&&(this.submitBtn.disabled=!0,this.submitText.classList.add("hidden"),this.loadingText.classList.remove("hidden"))}resetFormState(){this.submitBtn&&this.submitText&&this.loadingText&&(this.submitBtn.disabled=!1,this.submitText.classList.remove("hidden"),this.loadingText.classList.add("hidden"))}}class i{constructor(e){this.container=e,this.items=Array.from(this.container.querySelectorAll(".accordion-item")),this.triggers=Array.from(this.container.querySelectorAll(".accordion-trigger")),this.contents=Array.from(this.container.querySelectorAll(".accordion-content")),this.init()}init(){this.triggers.forEach((e,t)=>{e.addEventListener("click",e=>{this.toggleItem(e.currentTarget)}),e.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.toggleItem(e.currentTarget))})}),this.items.forEach((e,t)=>{const s=e.querySelector(".accordion-trigger"),i=e.querySelector(".accordion-content");"true"!==s.getAttribute("aria-expanded")&&i.classList.add("hidden")})}toggleItem(e){const t=e.closest(".accordion-item"),s=t.querySelector(".accordion-content"),i="true"===e.getAttribute("aria-expanded"),n=e.querySelector("svg");e.setAttribute("aria-expanded",!i),s.classList.toggle("hidden"),n&&n.classList.toggle("rotate-180"),!i&&this.container.hasAttribute("data-accordion-single")&&this.closeOtherItems(t)}closeOtherItems(e){this.items.forEach(t=>{if(t!==e){const e=t.querySelector(".accordion-trigger"),s=t.querySelector(".accordion-content"),i=e.querySelector("svg");e.setAttribute("aria-expanded","false"),s.classList.add("hidden"),i&&i.classList.remove("rotate-180")}})}}class n{constructor(){this.searchToggle=document.querySelector(".js-search-toggle"),this.searchOverlay=null,this.searchInput=null,this.closeButton=null,this.resultsDiv=null,this.isOverlayOpen=!1,this.isSpinnerVisible=!1,this.previousValue="",this.typingTimer=null,this.currentPage=1,this.totalPages=1,this.currentResults={},this.hasSearched=!1,this.searchToggle&&this.init()}init(){this.createOverlay(),this.searchToggle.addEventListener("click",()=>{this.openOverlay(),this.hasSearched||this.getDefaultContent()}),this.closeButton.addEventListener("click",this.closeOverlay.bind(this)),this.searchOverlay.addEventListener("click",e=>{e.target===this.searchOverlay&&this.closeOverlay()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&this.isOverlayOpen&&this.closeOverlay(),!e.ctrlKey&&!e.metaKey||"q"!==e.key.toLowerCase()||this.isOverlayOpen||(e.preventDefault(),this.openOverlay(),this.hasSearched||this.getDefaultContent())}),this.searchInput.addEventListener("input",this.typingLogic.bind(this))}getDefaultContent(){this.resultsDiv.innerHTML='<div class="flex justify-center py-8"><div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#2e7a56]"></div></div>',this.isSpinnerVisible=!0,fetch(`${wpvars.home}/wp-json/custom/v1/search/default`).then(e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()}).then(e=>{this.currentResults=e.results,this.displayResults(),this.paginationDiv.classList.add("hidden")}).catch(e=>{console.error("Error loading default content:",e),this.resultsDiv.innerHTML='\n          <div class="text-center py-8">\n            <h3 class="text-lg font-medium text-gray-900">Browse Latest Content</h3>\n            <p class="mt-2 text-gray-500">Start typing to search the site</p>\n          </div>\n        '}).finally(()=>{this.isSpinnerVisible=!1})}typingLogic(){this.searchInput.value!==this.previousValue&&(clearTimeout(this.typingTimer),this.searchInput.value?(this.isSpinnerVisible||(this.resultsDiv.innerHTML='<div class="flex justify-center py-8"><div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#2e7a56]"></div></div>',this.isSpinnerVisible=!0),this.currentPage=1,this.typingTimer=setTimeout(()=>{this.hasSearched=!0,this.getResults()},300)):this.hasSearched&&(this.resultsDiv.innerHTML="",this.paginationDiv.classList.add("hidden"),this.isSpinnerVisible=!1,this.hasSearched=!1,this.getDefaultContent()),this.previousValue=this.searchInput.value)}createOverlay(){"undefined"!=typeof wpvars&&wpvars.home&&wpvars.home,document.body.insertAdjacentHTML("beforeend",'\n      <div class="search-overlay fixed inset-0 z-[9999] bg-white bg-opacity-95 invisible opacity-0 scale-[1.09] transition-all duration-300 overflow-y-auto overflow-x-hidden pointer-events-none">\n        <div class="container mx-auto px-4 py-8 relative pointer-events-auto">\n          \x3c!-- Search Header --\x3e\n          <div class="flex justify-between items-center mb-8 bg-gray-100 p-4 rounded-lg">\n            <div class="flex items-center w-full">\n              <svg class="search-overlay__icon w-8 h-8 mr-4 text-[#2e7a56]" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>\n              </svg>\n              <input type="text" id="search-term" class="search-term flex-grow bg-transparent border-none focus:outline-none text-gray-800 text-xl placeholder-gray-400" placeholder="What are you looking for?" autocomplete="off">\n            </div>\n            <button class="search-overlay__close text-3xl text-[#2e7a56] hover:text-[#1e5a3e] transition-colors">\n              &times;\n            </button>\n          </div>\n          \n          \x3c!-- Results Container --\x3e\n          <div id="search-overlay__results" class="advanced-search__result"></div>\n          \n          \x3c!-- Pagination --\x3e\n          <div id="search-pagination" class="mt-8 flex justify-center items-center hidden">\n            <button id="prev-page" class="px-4 py-2 bg-[#2e7a56] text-white rounded-l-md hover:bg-[#1e5a3e] disabled:opacity-50 disabled:cursor-not-allowed" disabled>\n              Previous\n            </button>\n            <span class="px-4 py-2 bg-gray-100">\n              Page <span id="current-page">1</span> of <span id="total-pages">1</span>\n            </span>\n            <button id="next-page" class="px-4 py-2 bg-[#2e7a56] text-white rounded-r-md hover:bg-[#1e5a3e] disabled:opacity-50 disabled:cursor-not-allowed" disabled>\n              Next\n            </button>\n          </div>\n        </div>\n      </div>\n    '),this.searchOverlay=document.querySelector(".search-overlay"),this.searchInput=document.getElementById("search-term"),this.closeButton=document.querySelector(".search-overlay__close"),this.resultsDiv=document.getElementById("search-overlay__results"),this.paginationDiv=document.getElementById("search-pagination"),this.prevButton=document.getElementById("prev-page"),this.nextButton=document.getElementById("next-page"),this.currentPageEl=document.getElementById("current-page"),this.totalPagesEl=document.getElementById("total-pages"),this.prevButton.addEventListener("click",()=>{this.currentPage>1&&(this.currentPage--,this.getResults())}),this.nextButton.addEventListener("click",()=>{this.currentPage<this.totalPages&&(this.currentPage++,this.getResults())})}typingLogic(){this.searchInput.value!==this.previousValue&&(clearTimeout(this.typingTimer),this.searchInput.value?(this.isSpinnerVisible||(this.resultsDiv.innerHTML='<div class="flex justify-center py-8"><div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#2e7a56]"></div></div>',this.isSpinnerVisible=!0),this.currentPage=1,this.typingTimer=setTimeout(this.getResults.bind(this),300)):(this.resultsDiv.innerHTML="",this.paginationDiv.classList.add("hidden"),this.isSpinnerVisible=!1),this.previousValue=this.searchInput.value)}getResults(){const e=this.searchInput.value.trim();if(!e)return this.resultsDiv.innerHTML="",void this.paginationDiv.classList.add("hidden");fetch(`${wpvars.home}/wp-json/custom/v1/search?term=${encodeURIComponent(e)}&page=${this.currentPage}`).then(e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()}).then(e=>{this.currentResults=e.results,this.totalPages=Math.max(Math.ceil(e.total.general/10),Math.ceil(e.total.news/10),Math.ceil(e.total.documents/10)),this.displayResults(),this.updatePagination()}).catch(e=>{console.error("Search error:",e),this.resultsDiv.innerHTML='\n          <div class="text-center py-8 text-red-600">\n            Error loading search results. Please try again.\n          </div>\n        '}).finally(()=>{this.isSpinnerVisible=!1})}displayResults(){let e='\n      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">\n        \x3c!-- Left Column - Site Search --\x3e\n        <div class="advanced-search__column">\n          <section id="siteSearch" class="advanced-search__section">\n            <h2 class="advanced-search__heading text-2xl font-semibold text-[#2e7a56] mb-4 pb-2 border-b border-gray-200">Site Search</h2>\n            <ul class="advanced-search__list space-y-3">\n    ';if(this.currentResults.general?.length?this.currentResults.general.forEach(t=>{e+=`\n          <li class="advanced-search__list-item">\n            <a href="${t.link}" class="advanced-search__list-link group block p-3 hover:bg-gray-50 rounded-lg transition-colors">\n              <h3 class="advanced-search__list-title text-lg font-medium text-gray-900 group-hover:text-[#2e7a56]">${t.title}</h3>\n              <div class="advanced-search__list-subtitle text-gray-600 text-sm mt-1 line-clamp-2">${t.excerpt}</div>\n              <div class="advanced-search__list-meta text-xs text-gray-500 mt-1">${t.post_type}</div>\n            </a>\n          </li>\n        `}):e+='\n        <li class="text-gray-500 py-4">\n          No general results found\n        </li>\n      ',e+='\n            </ul>\n          </section>\n        </div>\n        \n        \x3c!-- Middle Column - News --\x3e\n        <div class="advanced-search__column">\n          <section id="newsroom" class="advanced-search__section">\n            <h2 class="advanced-search__heading text-2xl font-semibold text-[#2e7a56] mb-4 pb-2 border-b border-gray-200">Newsroom</h2>\n            <div class="space-y-4">\n    ',this.currentResults.news?.length?this.currentResults.news.forEach(t=>{e+=`\n          <article class="advanced-search__news-item">\n            <a href="${t.link}" class="group block">\n              ${t.image?`\n                <figure class="advanced-search__news-figure overflow-hidden rounded-lg mb-2">\n                  <img src="${t.image}" \n                       class="w-full h-40 object-cover group-hover:scale-105 transition-transform duration-300"\n                       alt="${t.title}">\n                </figure>\n              `:""}\n              <h3 class="advanced-search__news-title text-lg font-medium text-gray-900 group-hover:text-[#2e7a56] mb-1">${t.title}</h3>\n              <div class="advanced-search__news-excerpt text-gray-600 text-sm line-clamp-2">${t.excerpt}</div>\n            </a>\n          </article>\n        `}):e+='\n        <div class="text-gray-500 py-4">\n          No news results found\n        </div>\n      ',e+='\n            </div>\n          </section>\n        </div>\n        \n        \x3c!-- Right Column - Documents --\x3e\n        <div class="advanced-search__column">\n          <section id="documents" class="advanced-search__section">\n            <h2 class="advanced-search__heading text-2xl font-semibold text-[#2e7a56] mb-4 pb-2 border-b border-gray-200">Documents</h2>\n            <ul class="advanced-search__list space-y-3">\n    ',this.currentResults.documents?.length){const t={};this.currentResults.documents.forEach(e=>{t[e.type]||(t[e.type]=[]),t[e.type].push(e)});for(const[s,i]of Object.entries(t))e+=`\n      <div class="document-group">\n        <h3 class="text-lg font-medium text-gray-800 mb-3">${s}</h3>\n        <ul class="space-y-3">\n    `,i.forEach(t=>{e+=`\n        <li class="document-item bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow">\n          <a href="${t.link}" \n             target="_blank"\n             rel="noopener noreferrer"\n             class="block p-4 group">\n            <div class="flex justify-between items-start">\n              <div class="flex-1">\n                <h4 class="text-lg font-medium text-gray-900 group-hover:text-[#2e7a56] mb-1">${t.title}</h4>\n                <div class="flex items-center gap-3 text-sm">\n                  <span class="text-gray-500">${t.date}</span>\n                  <span class="text-gray-400">•</span>\n                  <span class="text-gray-500">${t.file_size||"PDF"}</span>\n                </div>\n              </div>\n              <div class="ml-4 flex-shrink-0">\n                <svg class="w-5 h-5 text-gray-400 group-hover:text-[#2e7a56]" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>\n                </svg>\n              </div>\n            </div>\n          </a>\n        </li>\n      `}),e+="\n        </ul>\n      </div>\n    ";e+="\n      </div>\n    </section>\n  "}e+="\n            </ul>\n          </section>\n        </div>\n      </div>\n    ",this.currentResults.general?.length||this.currentResults.news?.length||this.currentResults.documents?.length||(e='\n        <div class="text-center py-12 col-span-3">\n          <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>\n          </svg>\n          <h3 class="mt-2 text-lg font-medium text-gray-900">No results found</h3>\n          <p class="mt-1 text-gray-500">Try different search terms</p>\n        </div>\n      '),this.resultsDiv.innerHTML=e}updatePagination(){this.currentPageEl.textContent=this.currentPage,this.totalPagesEl.textContent=this.totalPages,this.prevButton.disabled=this.currentPage<=1,this.nextButton.disabled=this.currentPage>=this.totalPages,this.totalPages>1?this.paginationDiv.classList.remove("hidden"):this.paginationDiv.classList.add("hidden")}openOverlay(){this.searchOverlay.classList.remove("invisible","pointer-events-none"),this.searchOverlay.classList.add("visible","pointer-events-auto"),this.searchOverlay.style.opacity="1",this.searchOverlay.style.transform="scale(1)",document.body.classList.add("overflow-hidden"),setTimeout(()=>this.searchInput.focus(),350),this.isOverlayOpen=!0}closeOverlay(){this.searchOverlay.style.opacity="0",this.searchOverlay.style.transform="scale(1.09)",setTimeout(()=>{this.searchOverlay.classList.remove("visible","pointer-events-auto"),this.searchOverlay.classList.add("invisible","pointer-events-none"),document.body.classList.remove("overflow-hidden")},300),this.isOverlayOpen=!1}}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-tab-navigation]").forEach(t=>{new e(t)});const a=document.querySelector("header");a&&new t(a),document.querySelectorAll("#contact-form").forEach(e=>{new s(e)});const r=document.querySelectorAll(".divide-y.divide-gray-200");console.log(`Found ${r.length} accordion containers`),r.forEach(e=>{new i(e)}),new n})})();